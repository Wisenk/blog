<div class="container my-5" style="max-width: 900px;">
  <div class="card shadow-sm">
    <%# If you have an image %>
    <% if @post_blog.image.attached? %>
      <%= image_tag @post_blog.image, class: "card-img-top", style: "object-fit: cover; max-height: 400px;" %>
    <% end %>

    <div class="card-body">
      <h1 class="card-title mb-3"><%= @post_blog.title %></h1>
      <p class="card-text"><%= @post_blog.body %></p>

      <p class="text-muted mt-4 mb-0">
        Posted by <%= @post_blog.user.name if @post_blog.respond_to?(:user) %>
        on <%= @post_blog.created_at.strftime("%B %d, %Y") %>
      </p>

      <div class="mt-4">
        <%= link_to "Back to Posts", post_blogs_path, class: "btn btn-outline-secondary" %>
        <% if @post_blog.user == current_user %>
          <%= link_to "Edit", edit_post_blog_path(@post_blog), class: "btn btn-primary" %>
          <%= link_to "Delete", @post_blog, method: :delete, data: { confirm: "Are you sure?" }, class: "btn btn-danger" %>
        <% end %>
      </div>
    </div>
  </div>

  <div>
    <p>comments:<%= @post_blog.comments.count %></p>
    <% @post_blogs.post_comments.each do |post_comment| %>
      <p><%= image_tag post_comment.user.get_profile_image, class: "rounded-circle", style: "width: 30px; height: 30px;" %> <%= post_comment.user.name %></p>
      <%= post_comment.user.name %> 
      <%= post_comment.created_at.strftime("%Y/%m/%d %H:%M") %><%= post_comment.body %>
    <% end %>
  </div>

  <div class="mt-4">
    <%= form_with model: [@post_blog, @post_comment] do |f| %>
      <div class="form-group">
        <%= f.label :body, "Add a comment" %>
        <%= f.text_area :body, class: "form-control", rows: 3, required: true %>
      </div>
      <%= f.submit "Post Comment", class: "btn btn-primary mt-2" %>
    <% end %>
  </div>
</div>
