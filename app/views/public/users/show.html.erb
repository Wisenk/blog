<div class="container mt-5">
  <div class="card mx-auto" style="max-width: 600px;">
    <div class="card-body text-center">
    
      <div class="mb-3 text-center">
        <% if @user.profile_image.attached? %>
          <%= image_tag @user.get_profile_image, class: "rounded-circle mb-3", width: 150, height: 150 %>
        <% else %>
          <%= image_tag "no_image.jpg", class: "rounded-circle mb-3", width: 150, height: 150 %>
        <% end %>
      </div>

      <h5 class="text-muted mb-0">Name</h5>
      <h4 class="card-title"><%= @user.name %></h4>

      <h5 class="text-muted mb-0">About Me</h5>
      <p class="card-text"><%= @user.body.present? ? @user.body : "No information provided." %></p>
      
      <div class="d-flex justify-content-around my-3">
        <div>
          <h6 class="text-muted">followers</h6>
          <h5><%= link_to @user.followers.count, followers_user_path(@user) %></h5>
        </div>
        <div>
          <h6 class="text-muted">following</h6>
          <h5><%= link_to @user.following.count, followings_user_path(@user) %></h5>
        </div>
      </div>
      
      <div class="mt-3">
        <% if @user == current_user %>
          <%= link_to 'Edit Profile', edit_user_path(@user), class: 'btn btn-primary mt-2' %>
          <%= link_to "View My Posts", user_post_blogs_path(@user), class: 'btn btn-secondary mt-2' %>
        <% else %>
          <%= link_to "View #{@user.name}'s Posts", user_post_blogs_path(@user), class: 'btn btn-secondary mt-2' %>

          <% if current_user.following?(@user) %>
            <%= link_to 'Unfollow', relationship_path(current_user.active_relationships.find_by(followed_id: @user.id)), method: :delete, class: 'btn btn-warning mt-2' %>
          <% else %>
            <%= link_to 'Follow', relationships_path(user_id: @user.id), method: :post, class: 'btn btn-success mt-2' %>
          <% end %>
        <% end %>
      </div>


    </div>
  </div>
</div>